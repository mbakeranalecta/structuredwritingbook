<?xml version="1.0" encoding="UTF-8"?>
<chapter name="chapter.single-sourcing">
<title>Single Sourcing</title>
<annotations>
<p>Concepts</p>
<p><phrase><annotation type="concept">abstract language</annotation></phrase> <phrase><annotation type="concept">adaptive content</annotation></phrase> <phrase><annotation type="concept" specifically="algorithm">algorithms</annotation></phrase> <phrase><annotation type="concept">algorithm</annotation></phrase> <phrase><annotation type="concept">annotations</annotation></phrase> <phrase><annotation type="concept">annotation</annotation></phrase> <phrase><annotation type="concept">bottom-up information architecture</annotation></phrase> <phrase><annotation type="concept">categories</annotation></phrase> <phrase><annotation type="concept">categorization</annotation></phrase> <phrase><annotation type="concept">classification</annotation></phrase> <phrase><annotation type="concept">consistency</annotation></phrase> <phrase><annotation type="concept">constraints</annotation></phrase> <phrase><annotation type="concept">content silos</annotation></phrase> <phrase><annotation type="concept">content strategy</annotation></phrase> <phrase><annotation type="concept">coverage</annotation></phrase> <phrase><annotation type="concept">document domain</annotation></phrase> <phrase><annotation type="concept">document type</annotation></phrase> <phrase><annotation type="concept">document-domain</annotation></phrase> <phrase><annotation type="concept">electronic media</annotation></phrase> <phrase><annotation type="concept">Every Page is Page One</annotation></phrase> <phrase><annotation type="concept">extensibility</annotation></phrase> <phrase><annotation type="concept">faceted navigation</annotation></phrase> <phrase><annotation type="concept">feeds</annotation></phrase> <phrase><annotation type="concept">findability</annotation></phrase> <phrase><annotation type="concept">frameworks</annotation></phrase> <phrase><annotation type="concept">functional lucidity</annotation></phrase> <phrase><annotation type="concept">functionally lucid</annotation></phrase> <phrase><annotation type="concept">future proofing</annotation></phrase> <phrase><annotation type="concept">future proof</annotation></phrase> <phrase><annotation type="concept">guidance</annotation></phrase> <phrase><annotation type="concept">hierarchical structure</annotation></phrase> <phrase><annotation type="concept">hybrid markup language</annotation></phrase> <phrase><annotation type="concept">information architecture</annotation></phrase> <phrase><annotation type="concept">information design</annotation></phrase> <phrase><annotation type="concept">information foraging</annotation></phrase> <phrase><annotation type="concept">information mapping</annotation></phrase> <phrase><annotation type="concept">information typing</annotation></phrase> <phrase><annotation type="concept">interactive media</annotation></phrase> <phrase><annotation type="concept">management domain</annotation></phrase> <phrase><annotation type="concept">management-domain</annotation></phrase> <phrase><annotation type="concept">media domain</annotation></phrase> <phrase><annotation type="concept">media-domain</annotation></phrase> <phrase><annotation type="concept">metadata</annotation></phrase> <phrase><annotation type="concept">navigation</annotation></phrase> <phrase><annotation type="concept">normalization</annotation></phrase> <phrase><annotation type="concept">personalized content</annotation></phrase> <phrase><annotation type="concept">progressive disclosure</annotation></phrase> <phrase><annotation type="concept">referential integrity</annotation></phrase> <phrase><annotation type="concept">rendering problems</annotation></phrase> <phrase><annotation type="concept">reuse of patterns</annotation></phrase> <phrase><annotation type="concept">rhetorical</annotation></phrase> <phrase><annotation type="concept">rhetoric</annotation></phrase> <phrase><annotation type="concept">searchable</annotation></phrase> <phrase><annotation type="concept">search</annotation></phrase> <phrase><annotation type="concept">specialization</annotation></phrase> <phrase><annotation type="concept">structured content type</annotation></phrase> <phrase><annotation type="concept">structured writing domains</annotation></phrase> <phrase><annotation type="concept">style</annotation></phrase> <phrase><annotation type="concept">subject affinities</annotation></phrase> <phrase><annotation type="concept">subject affinity</annotation></phrase> <phrase><annotation type="concept">subject domain</annotation></phrase> <phrase><annotation type="concept">subject-domain</annotation></phrase> <phrase><annotation type="concept">taxonomy</annotation></phrase> <phrase><annotation type="concept">terminology</annotation></phrase> <phrase><annotation type="concept">top-down information architecture</annotation></phrase> <phrase><annotation type="concept" specifically="top-down information architecture">top-down</annotation></phrase> <phrase><annotation type="concept">WYSIWYG</annotation></phrase></p>
<p>Languages</p>
<p><phrase><annotation type="language">ASCIIDOC</annotation></phrase> <phrase><annotation type="language">cascading style sheets</annotation></phrase> <phrase><annotation type="language" specifically="cascading style sheets">CSS</annotation></phrase> <phrase><annotation type="language"><annotation type="standard">DITA</annotation></annotation></phrase> <phrase><annotation type="language"><annotation type="standard">DocBook</annotation></annotation></phrase> <phrase><annotation type="language"><annotation type="standard">HTML</annotation></annotation></phrase> <phrase><annotation type="language">JavaDoc</annotation></phrase> <phrase><annotation type="language">LaTeX</annotation></phrase> <phrase><annotation type="language">Markdown</annotation></phrase> <phrase><annotation type="language">mathml</annotation></phrase> <phrase><annotation type="language">reStructuredText</annotation></phrase> <phrase><annotation type="language">SAM</annotation></phrase> <phrase><annotation type="language">SGML</annotation></phrase> <phrase><annotation type="language">TeX</annotation></phrase> <phrase><annotation type="language">XLIFF</annotation></phrase> <phrase><annotation type="language">XML schema</annotation></phrase> <phrase><annotation type="language"><annotation type="standard">XML</annotation></annotation></phrase> <phrase><annotation type="language">XSD</annotation></phrase> <phrase><annotation type="language">XSL-FO</annotation></phrase></p>
<p>Algorithms</p>
<p><phrase><annotation type="algorithm">active content</annotation></phrase> <phrase><annotation type="algorithm">audit algorithm</annotation></phrase> <phrase><annotation type="algorithm">auditable</annotation></phrase> <phrase><annotation type="algorithm">auditing</annotation></phrase> <phrase><annotation type="algorithm">audit</annotation></phrase> <phrase><annotation type="algorithm">authoring algorithm</annotation></phrase> <phrase><annotation type="algorithm">authoring</annotation></phrase> <phrase><annotation type="algorithm">avoiding duplication</annotation></phrase> <phrase><annotation type="algorithm">change management</annotation></phrase> <phrase><annotation type="algorithm">change</annotation></phrase> <phrase><annotation type="algorithm">collaboration</annotation></phrase> <phrase><annotation type="algorithm">compliance</annotation></phrase> <phrase><annotation type="algorithm" specifically="composition">composability</annotation></phrase> <phrase><annotation type="algorithm">composition algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="composition algorithm">composition</annotation></phrase> <phrase><annotation type="process">conformance</annotation></phrase> <phrase><annotation type="process" specifically="conformance">conformant</annotation></phrase> <phrase><annotation type="process" specifically="conformance">conforming</annotation></phrase> <phrase><annotation type="process" specifically="conformance">conforms</annotation></phrase> <phrase><annotation type="process">content management</annotation></phrase> <phrase><annotation type="algorithm">content reuse algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="content reuse algorithm">content reuse</annotation></phrase> <phrase><annotation type="algorithm" specifically="content reuse algorithm">content-reuse</annotation></phrase> <phrase><annotation type="algorithm">continuous translation</annotation></phrase> <phrase><annotation type="algorithm">deferred synthesis</annotation></phrase> <phrase><annotation type="algorithm">differential presentation</annotation></phrase> <phrase><annotation type="algorithm">differential single sourcing</annotation></phrase> <phrase><annotation type="algorithm">differential synthesis</annotation></phrase> <phrase><annotation type="algorithm">encoding algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="encoding algorithm">encoding</annotation></phrase> <phrase><annotation type="algorithm">exchange algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="exchange algorithm">exchange</annotation></phrase> <phrase><annotation type="algorithm">extract algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="extract algorithm">extract</annotation></phrase> <phrase><annotation type="algorithm">formatting algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="formatting algorithm">formatting</annotation></phrase> <phrase><annotation type="algorithm">information architecture algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="information architecture algorithm">information architecture</annotation></phrase> <phrase><annotation type="algorithm">linking algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="linking algorithm">linking</annotation></phrase> <phrase><annotation type="algorithm">merge algorithm</annotation></phrase> <phrase><annotation type="algorithm" specifically="merge algorithm">merge</annotation></phrase> <phrase><annotation type="algorithm">modeling algorithm</annotation></phrase> <phrase><annotation type="algorithm">pagination</annotation></phrase> <phrase><annotation type="algorithm">presentation algorithms</annotation></phrase> <phrase><annotation type="algorithm">presentation algorithm</annotation></phrase> <phrase><annotation type="algorithm">presentation</annotation></phrase> <phrase><annotation type="algorithm">publication</annotation></phrase> <phrase><annotation type="algorithm">publish  algorithm</annotation></phrase> <phrase><annotation type="algorithm">publishing algorithm</annotation></phrase> <phrase><annotation type="algorithm">publishing</annotation></phrase> <phrase><annotation type="algorithm">publishing</annotation></phrase> <phrase><annotation type="algorithm">quality algorithm</annotation></phrase> <phrase><annotation type="algorithm">quality</annotation></phrase> <phrase><annotation type="algorithm">quality</annotation></phrase> <phrase><annotation type="algorithm">relevance</annotation></phrase> <phrase><annotation type="algorithm">relevant</annotation></phrase> <phrase><annotation type="algorithm">rendering algorithm</annotation></phrase> <phrase><annotation type="algorithm">rendering</annotation></phrase> <phrase><annotation type="algorithm">repeatability</annotation></phrase> <phrase><annotation type="algorithm">repeatable</annotation></phrase> <phrase><annotation type="algorithm">reuse algorithm</annotation></phrase> <phrase><annotation type="algorithm">reuse</annotation></phrase> <phrase><annotation type="algorithm">separate content from formatting</annotation></phrase> <phrase><annotation type="algorithm">separating content form formatting</annotation></phrase> <phrase><annotation type="algorithm">separating content from formatting</annotation></phrase> <phrase><annotation type="algorithm">single source of truth algorithm</annotation></phrase> <phrase><annotation type="algorithm">single source of truth</annotation></phrase> <phrase><annotation type="algorithm">single sourcing algorithm</annotation></phrase> <phrase><annotation type="algorithm">single sourcing</annotation></phrase> <phrase><annotation type="algorithm">single sourcing</annotation></phrase> <phrase><annotation type="algorithm">single-source</annotation></phrase> <phrase><annotation type="algorithm">synthesis algorithm</annotation></phrase> <phrase><annotation type="algorithm">synthesis algorithm</annotation></phrase> <phrase><annotation type="algorithm">synthesis</annotation></phrase> <phrase><annotation type="algorithm">timeliness</annotation></phrase> <phrase><annotation type="algorithm">timely</annotation></phrase> <phrase><annotation type="algorithm">translation</annotation></phrase> <phrase><annotation type="algorithm">validate</annotation></phrase> <phrase><annotation type="algorithm" specifically="conformance">validation</annotation></phrase> <phrase><annotation type="algorithm">validation</annotation></phrase> <phrase><annotation type="algorithm">validity</annotation></phrase> <phrase><annotation type="algorithm">writing</annotation></phrase></p>
<p>Tools</p>
<p><phrase><annotation type="tool">browser</annotation></phrase> <phrase><annotation type="tool" specifically="content management system">CMS</annotation></phrase> <phrase><annotation type="tool">content management system</annotation></phrase> <phrase><annotation type="tool">content management systems</annotation></phrase> <phrase><annotation type="tool">Doxygen</annotation></phrase> <phrase><annotation type="tool">ebook readers</annotation></phrase> <phrase><annotation type="tool">FrameMaker</annotation></phrase> <phrase><annotation type="tool">FrameScript</annotation></phrase> <phrase><annotation type="tool">help systems</annotation></phrase> <phrase><annotation type="tool">Microsoft Word</annotation></phrase> <phrase><annotation type="tool">SPFE</annotation></phrase> <phrase><annotation type="tool">Sphinx</annotation></phrase> <phrase><annotation type="tool">XML database</annotation></phrase> <phrase><annotation type="tool">XML databases</annotation></phrase> <phrase><annotation type="tool">markup</annotation></phrase> <phrase><annotation type="tool">markup language</annotation></phrase> <phrase><annotation type="tool">markup languages</annotation></phrase> <phrase><annotation type="tool">Word</annotation></phrase> <phrase><annotation type="tool">publishing pipeline</annotation></phrase> <phrase><annotation type="tool">repository</annotation></phrase> <phrase><annotation type="tool">page description language</annotation></phrase> <phrase><annotation type="tool">page descriptions languages</annotation></phrase> <phrase><annotation type="tool">schema</annotation></phrase> <phrase><annotation type="tool">schema languages</annotation></phrase> <phrase><annotation type="tool">search engine</annotation></phrase> <phrase><annotation type="tool">tool chain</annotation></phrase> <phrase><annotation type="tool">tool chains</annotation></phrase> <phrase><annotation type="tool">typesetting languages</annotation></phrase> <phrase><annotation type="tool">version control system</annotation></phrase> <phrase><annotation type="tool">workflow</annotation></phrase> <phrase><annotation type="tool">widgets</annotation></phrase> <phrase><annotation type="tool">wiki</annotation></phrase> <phrase><annotation type="tool">rights management</annotation></phrase> <phrase><annotation type="tool">queries</annotation></phrase> <phrase><annotation type="tool">query</annotation></phrase> <phrase><annotation type="tool">formatting language</annotation></phrase> <phrase><annotation type="tool">formatting languages</annotation></phrase></p>
<p>Roles</p>
<p><phrase><annotation type="role">information architect</annotation></phrase> <phrase><annotation type="role">content engineer</annotation></phrase> <phrase><annotation type="role">content engineers</annotation></phrase> <phrase><annotation type="role">content strategists</annotation></phrase> <phrase><annotation type="role">document designers</annotation></phrase> <phrase><annotation type="role">information architect</annotation></phrase> <phrase><annotation type="role">information architects</annotation></phrase> <phrase><annotation type="role">publication designers</annotation></phrase> <phrase><annotation type="role">subject matter experts</annotation></phrase></p>
<p>Companies</p>
<p><phrase><annotation type="company">Amazon</annotation></phrase> <phrase><annotation type="company">Narrative Science</annotation></phrase></p>
<p>Structures <phrase><annotation type="structure">cross references</annotation></phrase> <phrase><annotation type="structure">id</annotation></phrase> <phrase><annotation type="structure">ids</annotation></phrase> <phrase><annotation type="structure">index</annotation></phrase> <phrase><annotation type="structure">key</annotation></phrase> <phrase><annotation type="structure">keys</annotation></phrase> <phrase><annotation type="structure">list</annotation></phrase> <phrase><annotation type="structure">microformats</annotation></phrase> <phrase><annotation type="structure">subject annotation</annotation></phrase> <phrase><annotation type="structure">subject annotations</annotation></phrase> <phrase><annotation type="structure">table</annotation></phrase> <phrase><annotation type="structure">table of contents</annotation></phrase> <phrase><annotation type="structure">tables</annotation></phrase> <phrase><annotation type="structure">tables of contents</annotation></phrase> <phrase><annotation type="structure">cals table model</annotation></phrase> <phrase><annotation type="structure">links</annotation></phrase> <phrase><annotation type="structure">rhetorical block</annotation></phrase> <phrase><annotation type="structure">rhetorical blocks</annotation></phrase> <phrase><annotation type="structure">semantic block</annotation></phrase> <phrase><annotation type="structure">semantic blocks</annotation></phrase> <phrase><annotation type="structure">topic</annotation></phrase> <phrase><annotation type="structure">topics</annotation></phrase> <phrase><annotation type="structure" specifically="table of contents">TOC</annotation></phrase> <phrase><annotation type="structure">rhetorical pattern</annotation></phrase> <phrase><annotation type="structure">rhetorical structure</annotation></phrase></p>
<p>Standards (see also entries under languages, some of which are standards) <phrase><annotation type="standard">iso 1806</annotation></phrase> <phrase><annotation type="standard">s1000d</annotation></phrase></p>
<p>Programming languages</p>
<p><phrase><annotation type="programming-language">java</annotation></phrase> <phrase><annotation type="programming-language">javascript</annotation></phrase></p>
<p>Media</p>
<p><phrase><annotation type="media">paper</annotation></phrase> <phrase><annotation type="media">pdf</annotation></phrase> <phrase><annotation type="media">internet</annotation></phrase> <phrase><annotation type="media">hypertext</annotation></phrase> <phrase><annotation type="media">Web</annotation></phrase> <phrase><annotation type="media">web pages</annotation></phrase> <phrase><annotation type="media">tablet</annotation></phrase> <phrase><annotation type="media">online media</annotation></phrase> <phrase><annotation type="media">books</annotation></phrase></p>
</annotations>
<index>
<record>
<type>concept</type>
<term>single sourcing</term>
</record>
</index>
<p>The need to publish the same document in more than one medium – for example, print and Web – is a common source of complexity. The term <phrase><annotation type="italic">single sourcing</annotation></phrase> is used to describe a variety of different ways to address this need, all of which involve using a single body of content to create output in more than one medium. I look at variations on this theme in this and subsequent chapters.</p>
<p>Single sourcing adds complexity to the job of separating content from formatting because you are now separating content from not one but two or more sets of formatting. In other words, you are not simply separating content from formatting, you are separating a set of decisions about formatting from your content so you can make different decisions for each medium. If you don’t get the partitioning correct, problems will show up when you try to apply two different sets of formatting to the same content.</p>
<p>Many organizations have unhandled complexity in this area – complexity that falls through to readers. Often, their authoring techniques do not allow writers to sufficiently separate media-specific formatting from content. As a result, formatting for one medium gets applied to another medium, which means the content in that medium does not work as well as it could. By improving how you separate content from formatting, you can significantly reduce the amount of complexity that goes unhandled, resulting in a better experience for your readers.</p>
<section>
<title>Basic single sourcing</title>
<p>The basic single-sourcing algorithm is straightforward (see <citation nameref="chapter.processing"/>). Basic single sourcing involves taking a piece of content in the <phrase><annotation type="concept">document domain</annotation></phrase> and processing its document-domain structures into different <phrase><annotation type="concept">media-domain</annotation></phrase> structures for each target medium.</p>
<p>Suppose you have recorded a recipe in the document domain (see <citation idref="fig.ssa-eggs-1"/>).</p>
<pagination-tweak>
<min-space>3in</min-space>
</pagination-tweak>
<figure id="fig.ssa-eggs-1">
<title>Document-domain recipe for hard-boiled eggs</title>
<codeblock language="sam">

page: 
    title: Hard Boiled Eggs
    
    A hard boiled egg is simple and nutritious. 
    Prep time, 15 minutes. Serves 6.
    
    section: Ingredients
        ul:
            li: 12 eggs
            li: 2qt water
    
    section: Preparation
        ol:
            li: Place eggs in pan and cover with water.
            li: Bring water to a boil.
            li: Remove from heat and cover for 12 minutes.
            li: Place eggs in cold water to stop cooking.
            li: Peel and serve.
</codeblock>
</figure>
<p>You can output this recipe to two different media by applying two different formatting algorithms. First you output to the Web by creating <phrase><annotation type="language"><annotation type="standard">HTML</annotation></annotation></phrase> (see <citation idref="fig.ssa-recipe2html"/>).</p>
<figure id="fig.ssa-recipe2html">
<title>Pseudocode to convert document-domain recipe to HTML output</title>
<pagination-tweak>
<keep-together>auto</keep-together>
</pagination-tweak>
<codeblock language="pseudo">

match page
    create html
        stylesheet www.example.com/style.css
        continue
    
match title
    create h1
        continue
        
match p
    copy
        continue
        
match section
    continue
        
match section/title 
    create h2
        continue
        
match ul
    copy 
        continue
        
match ol
    copy
        continue

match li
    copy
        continue
</codeblock>
</figure>
<p>In <citation idref="fig.ssa-recipe2html"/>, paragraph and list structures have the same names in the source format as they do in the output format (HTML) so you just copy the structures rather than recreating them. This is a common pattern in structured writing algorithms.</p>
<p>The algorithm in <citation idref="fig.ssa-recipe2html"/> transforms our source into HTML that looks like <citation idref="fig.ssa-html-recipe-output"/>.</p>
<figure id="fig.ssa-html-recipe-output">
<title>Result of running the algorithm in <citation idref="fig.ssa-recipe2html"/></title>
<codeblock language="html">

&lt;html&gt;
    &lt;head&gt;
        &lt;link rel="stylesheet" type="text/css"
        href="//www.apache.org/css/code.css"&gt;
    &lt;/head&gt;
    
    &lt;h1&gt;Hard Boiled Eggs&lt;/h1&gt;
    
    &lt;p&gt;A hard boiled egg is simple and nutritious. 
    Prep time, 15 minutes. Serves 6.&lt;/p&gt;
    
    &lt;h2&gt;Ingredients&lt;/h2&gt;
    
    &lt;ul&gt;
        &lt;li&gt;12 eggs&lt;/li&gt;
        &lt;li&gt;2qt water&lt;/li&gt;
    &lt;/ul&gt;
        
    &lt;h2&gt;Preparation&lt;/h2&gt;
    
    &lt;ol&gt;
        &lt;li&gt;Place eggs in pan and cover with water.&lt;/li&gt;
        &lt;li&gt;Bring water to a boil.&lt;/li&gt;
        &lt;li&gt;Remove from heat and cover for 12 minutes.&lt;/li&gt;
        &lt;li&gt;Place eggs in cold water to stop cooking.&lt;/li&gt;
        &lt;li&gt;Peel and serve.&lt;/li&gt;
    &lt;/ol&gt;
&lt;/html&gt;
</codeblock>
</figure>
<p>Outputting to paper (or to PDF, which is a kind of virtual paper) is more complex. On the Web, you output to a screen which is of flexible width and infinite length. The browser wraps lines of text to the screen width (unless formatting commands tell it to do otherwise), and there is no issue with breaking text from one page to another. For paper, however, you have to fit content into a set of fixed-size pages.</p>
<p>This introduces a number of formatting issues, including the following:</p>
<ul>
<li>
<p>Where to break each line of text so the margins look neat and the text is not cramped or spread out too much.</p>
</li>
<li>
<p>How to avoid placing a heading at the bottom of a page or the last line of a paragraph as the first line of a page.</p>
</li>
<li>
<p>How to handle a list or a table when you run out of space on the page.</p>
</li>
<li>
<p>How to create a cross reference to another page when you don’t know the page number yet.</p>
</li>
</ul>
<p>Because of issues like this, you don’t write a formatting algorithm for paper the same the way you write an algorithm for HTML. Instead, you use an intermediate typesetting system that already knows how to handle tasks such as inserting page-number references and handling line and page breaks. Rather than handling these things yourself, you give the typesetting system general guidance and then let it do its job.</p>
<p>One such typesetting system is <phrase><annotation type="language">XSL-FO</annotation></phrase> (Extensible Stylesheet Language - Formatting Objects). Other typesetting systems include <phrase><annotation type="language">TeX</annotation></phrase> and newer versions of <phrase><annotation type="language">CSS</annotation></phrase>. XSL-FO is a typesetting language written in <phrase><annotation type="language">XML</annotation></phrase>. To format your content using <phrase><annotation type="language">XSL-FO</annotation></phrase>, you transform your source content into <phrase><annotation type="language">XSL-FO</annotation></phrase> markup, just the way you transform it into <phrase><annotation type="language">HTML</annotation></phrase> for the Web. But then you run the <phrase><annotation type="language">XSL-FO</annotation></phrase> markup through an <phrase><annotation type="language">XSL-FO</annotation></phrase> processor to produce your final output, typically <phrase><annotation type="language">PDF</annotation></phrase>.</p>
<p>Here is a small example of XSL-FO markup:</p>
<codeblock language="XSL-FO">

&lt;fo:block space-after="4pt"&gt;
   &lt;fo:wrapper font-size="14pt" font-weight="bold"&gt;
     Hard Boiled Eggs
   &lt;/fo:wrapper&gt;
&lt;/fo:block&gt;
</codeblock>
<p>The <phrase><annotation type="language">XSL-FO</annotation></phrase> code contains <phrase><annotation type="concept">media-domain</annotation></phrase> instructions for spacing and font choices. There is no division between content structures and formatting structures as there is with <phrase><annotation type="language">HTML</annotation></phrase> and <phrase><annotation type="language">CSS</annotation></phrase>. Also, as a pure media-domain language, XSL-FO does not have document-domain structures such as paragraphs and titles. To XSL-FO, a document is simply a set of blocks with specific formatting properties attached to them.</p>
<p>To limit the amount of detail, the algorithm in <citation idref="fig.ssa-fo-algorithm"/> shows only a portion of the pseudocode for handling recipe markup (The point here is not to teach <phrase><annotation type="language">XSL-FO</annotation></phrase>, but to show how the algorithm works).</p>
<figure id="fig.ssa-fo-algorithm">
<title>Portion of the algorithm to generate XSL-FO from a recipe</title>
<codeblock language="pseudo">

match title
    output '&lt;fo:block space-after="4pt"&gt;'
        output '&lt;fo:wrapper font-size="14pt" font-weight="bold"&gt;'
            continue
        output '&lt;/fo:wrapper&gt;'
    output '&lt;/fo:block&gt;'
</codeblock>
</figure>
<p>The rule shown in <citation idref="fig.ssa-fo-algorithm"/> simply wraps the XSL-FO formatting structures around the text of the title. It unpacks the text from a <phrase><annotation type="concept">document-domain</annotation></phrase> structure and inserts it into a <phrase><annotation type="concept">media-domain</annotation></phrase> structure.</p>
</section>
<section>
<title>Differential single sourcing</title>
<p>Basic <phrase><annotation type="italic">single sourcing</annotation></phrase> outputs the same document presentation to different media. However, each medium is different, and what works well in one medium does not always work as well in another. For example, online media generally support <phrase><annotation type="concept">hypertext</annotation></phrase> links, while paper does not. Suppose you have a piece of content that includes a link:</p>
<codeblock>

In Rio Bravo, {the Duke}(link "http://JohnWayne.com")
plays an ex-Union colonel out for revenge.
</codeblock>
<p>In SAM syntax, the link markup (<code>link "http://JohnWayne.com</code>) specifies the address to link to. In the algorithm examples below, I refer to this markup as the <phrase><annotation type="italic">specifically</annotation></phrase> attribute using the notation <code>@specifically</code>.</p>
<p>In HTML, you output this as a link using the HTML <code>a</code> element, so the algorithm looks like <citation idref="fig.ssa-specifically-1"/>.</p>
<figure id="fig.ssa-specifically-1">
<title>Algorithm to generate HTML link from the <code>@specifically</code> attribute</title>
<codeblock>

match p
    copy
        continue

match link
    create a
        attribute href = @specifically 
        continue
</codeblock>
</figure>
<p>The result of this algorithm is shown in <citation idref="fig.ssa-specifically-1-output"/>.</p>
<figure id="fig.ssa-specifically-1-output">
<title>Output of the algorithm in <citation idref="fig.ssa-specifically-1"/></title>
<codeblock language="html">

&lt;p&gt;In Rio Bravo, &lt;a href="http://JohnWayne.com"&gt;The Duke&lt;/a&gt;
plays and ex-Union colonel out for revenge.
&lt;/p&gt;
</codeblock>
</figure>
<p>But suppose you want to output this same content to paper. If you output it to PDF, you can still create a link as with HTML, but when that PDF is printed, all that’s left is a slight color change in the text and maybe an underline. Readers cannot follow the link.</p>
<p>You can’t print an active link on paper, but you can print the URL, so the reader can type it into a browser. Your algorithm can print the link inline or as a footnote. <citation idref="fig.ssa-specifically-2"/> shows the algorithm for printing the URL inline. (I dispense with the detailed XSL-FO syntax this time.)</p>
<figure id="fig.ssa-specifically-2">
<title>Algorithm to display the URL for a link in print</title>
<codeblock language="pseudo">

match p
    create fo:block
        continue
        
match link
    continue
    output " (see: "
    output @specifically
    output ") "
</codeblock>
</figure>
<p>This will produce the output in <citation idref="fig.ssa-specifically-out"/>:</p>
<figure id="fig.ssa-specifically-out">
<title>Output of <citation idref="fig.ssa-specifically-out"/></title>
<codeblock language="xml">

&lt;fo:block&gt;
In Rio Bravo, the Duke (see: http://JohnWayne.com) 
plays an ex-Union colonel out for revenge.
&lt;/fo:block&gt;
</codeblock>
</figure>
<p>This works, but note that the effect is not the same in each medium. Online, the link to JohnWayne.com disambiguates the phrase “The Duke” for those readers who do not recognize it. A simple click on the link will explain who “the Duke” is. But in the paper example, such disambiguation exists only incidentally, because the words “JohnWayne” happen to appear in the URL. This is not how you would disambiguate “The Duke” if you were writing for paper. You would be more likely to do something like this:</p>
<blockquote>
<p>The Duke (John Wayne) plays an ex-Union colonel.</p>
</blockquote>
<p>This provides readers with less information, in the sense that it does not give them access to all the information on JohnWayne.com, but it does a better job of disambiguation and in a more paper-like way. The loss of the reference to JohnWayne.com is probably not an issue here. Following that link by typing it into a browser is a lot more work than simply clicking on a Web link. Someone who wants more information on John Wayne is far more likely to type “John Wayne” into Google than type “JohnWayne.com” into the browser address bar.</p>
<p>As written, the source content provides no easy way to produce this preferred form for paper. The content is in the <phrase><annotation type="concept">document domain</annotation></phrase>, which specifies the presentation of the content. Therefore, it is not a neutral format between media that require different forms of presentation. The choice to specify a link directly in the markup gives it a strong bias towards the Web and online media rather than paper. A <phrase><annotation type="concept">document-domain</annotation></phrase> approach that favored paper would similarly lead to a poorer online presentation by omitting the link.</p>
<p>You need a <phrase><annotation type="italic">differential</annotation></phrase> approach to single sourcing, one that allows you to differ not only the formatting but the presentation of the content for different media.</p>
<p>One way to accomplish differential single sourcing is to record the content in the <phrase><annotation type="concept">subject domain</annotation></phrase>, thus removing the prejudice of the document-domain presentation for one class of media or another. Here is how this markup might look:</p>
<codeblock language="sam">

{The Duke}(actor "John Wayne") plays an ex-Union colonel.
</codeblock>
<p>In this example, you annotate the phrase “The Duke” with subject-domain markup that clarifies exactly what the text refers to. That annotation says that “the Duke” is the name of an actor, specifically John Wayne.</p>
<p>Our document-domain examples attempted to clarify “the Duke” for readers, but they did so in media-dependent ways. This subject-domain example clarifies the meaning of “The Duke” in a presentation-neutral way; it explicitly, formally, and unambiguously marks up what the phrase refers to. This markup is written for algorithms, not readers. It allows an algorithm to generate an appropriate clarification for the reader in any target medium (see <citation idref="fig.ssa-specifically-3-paper"/> and <citation idref="fig.ssa-specifically-3-web"/>).</p>
<figure id="fig.ssa-specifically-3-paper">
<title>Algorithm to render paper from subject-domain markup</title>
<codeblock>

match actor
    continue
    output " ("
    output @specifically
    output ") "
</codeblock>
</figure>
<figure id="fig.ssa-specifically-3-web">
<title>Algorithm to Web links from subject-domain markup</title>
<codeblock>

match actor
    create link
        $href = get link for actor named @specifically
        attribute href = $href
        continue
</codeblock>
</figure>
<p>This assumes the existence of a system that can respond to the <code>get link</code> instruction and look up pages to link to based on the type and a name of a subject. I look at such a system in <citation nameref="chapter.linking"/>, which revisits this example in more detail.</p>
</section>
<section>
<title>Differential organization and presentation</title>
<p>Differences in presentation between media can be broader than this. Paper documents sometimes use complex tables and elaborate layouts that don’t translate well to online media. Effective table layout depends on knowing the width of the page you have available, and online you don’t know that. A table that looks great on paper may be unreadable on a mobile device, for instance.</p>
<p>And this is more than a layout issue. Sometimes the things that paper does in a static way should be done dynamically in online media. For example, airline and train schedules have traditionally been printed as timetables on paper, but you rarely see them presented that way online. Rather, you see an interactive travel planner that lets you choose your starting point, destination, and desired travel times and then presents you with the best schedule, including when and where to make connections. If your single source is a timetable designed for print and PDF, you can’t produce the kind of online presentation of your schedule that people expect, and that can have a direct impact on your business.</p>
<p>To single source schedule information for both paper and online media, you can’t maintain that content in a document-domain table structure. You need to maintain it in a timetable database structure (which is in the <phrase><annotation type="concept">subject domain</annotation></phrase>, even though it looks like a database, not a document).</p>
<p>An algorithm can read such a database to generate a document-domain table for print publication. For the Web, however, you can create a web application that queries the same database dynamically to calculate routes and schedules for individual travelers.</p>
<!--  pix of timetable and routing widget ??? -->
<p>In this scenario, you move content to the <phrase><annotation type="concept">subject domain</annotation></phrase> to partition the presentation from the information, which allows you to produce a different information design for different media (see <citation idref="ex.ssa-differential"/>). I examine these scenarios in more depth in <citation nameref="chapter.wide"/>.</p>
<figure id="ex.ssa-differential">
<title>Information design for single sourcing</title>
<insert item="../graphics/Differential.xml" type="image"/>
</figure>
</section>
<section>
<title>Conditional differential design</title>
<p>You can also do differential single sourcing by using conditional <phrase><annotation type="concept">management-domain</annotation></phrase> structures in the document domain.</p>
<p>For instance, if you are writing a manual that you intend to single source to a help system, you might want to add context setting information to the start of a section when it appears in the help system. The manual may be designed to be read sequentially, meaning that the context of individual sections is established by what came before. But help systems are always accessed randomly, meaning that the context of a particular help topic may not be clear if it was single sourced from a manual. To accommodate this, you could include a context-setting paragraph that is conditionalized to appear only in help output (see <citation idref="ex.ssa-conditional-1"/>):</p>
<figure id="ex.ssa-conditional-1">
<title>Differential single source example using management-domain structures</title>
<codeblock language="sam">

section: Wrangling left-handed widgets

    ~~~(?help-only)
    
        Left-handed widgets are used when wrangling 
        counter-clockwise.
        
    To wrangle a left handed widget:
    
    1. Loosen the doohickey using a medium thingamabob.
    2. Spin three times around under a full moon.
    3. Touch the sky.            
</codeblock>
</figure>
<p>In <citation idref="ex.ssa-conditional-1"/>, the SAM markup <code>~~~</code> creates a fragment structure to which conditional tokens can be applied. Content indented under the fragment marker is part of the fragment.</p>
<p>To output a manual, you suppress the help-only content:</p>
<codeblock language="pseudo">

match fragment where conditions = help-only
    ignore
</codeblock>
<p>To output help, you include it:</p>
<codeblock language="pseudo">

match fragment where conditions = help-only
    continue
</codeblock>
</section>
<section>
<title>Primary and secondary media</title>
<p>While differential single sourcing can help you output documents that work well in multiple media, there are limits to how far this approach can take you.</p>
<p>Books are a linear medium in which one chapter follows another in order. The Web is a <phrase><annotation type="concept">hypertext</annotation></phrase> medium in which every page is page one. Readers arrive at a page via search, and they navigate by following hypertext links. The linear and hypertext approaches are fundamentally different ways of writing that invite fundamentally different ways of navigating and using information.<citation idref="eppo"/> Even moving content to the <phrase><annotation type="concept">subject domain</annotation></phrase> as much as possible does not entirely factor out these fundamental differences in approach.</p>
<footnote id="eppo">
<p>For a full examination of the differences, see my book <phrase><annotation type="citetitle" specifically="Baker2013">Every Page is Page One: Topic-based Writing for Technical Communication and the Web</annotation></phrase>.</p>
</footnote>
<p>When single sourcing content to both linear paper-like media and <phrase><annotation type="concept">hypertext</annotation></phrase> web-like media, you generally have to choose a primary medium. Single sourcing that content to other media will be on a best-effort basis. It may be good enough for a particular purpose, but it will never be as good as it could have been had you designed exclusively for that medium.</p>
<p>Many of the tools used for single sourcing have a built-in bias towards one medium or another. Desktop-publishing tools such as <phrase><annotation type="tool">FrameMaker</annotation></phrase>, for instance, were designed for linear media. Online collaborative tools such as <phrase><annotation type="tool">wikis</annotation></phrase> were designed for <phrase><annotation type="concept">hypertext</annotation></phrase> media. It is usually a good idea to pick a tool that was designed for the medium you choose as primary. Tools partition the complexity of content creation to best suit the primary medium they were designed for.</p>
<p>Often, the tools a group uses implicitly determine the primary medium. This usually means that the primary medium is paper, and paper often continues to be primary even after the organization stops producing paper, and their readers have moved to online formats.</p>
<p>Some organizations think they should not switch to tools that are designed primarily for online content until they have entirely abandoned paper and paper-like formats such as PDF. This certainly does not need to be the case. It is perfectly possible to switch to online-primary tools and still produce linear media as a secondary output format.</p>
<p>Changing your information design practices from linear, paper-based designs to <phrase><annotation type="concept">hypertext</annotation></phrase> designs is not trivial, but such designs better suit the way many people use and access content today. I discuss these design differences in depth in my book, <phrase><annotation type="citetitle">Every Page is Page One: Topic-based Writing for Technical Communication and the Web</annotation></phrase>. Don’t expect single sourcing, by itself, to successfully turn document-oriented design into effective hypertext. It is usually more effective to adopt an <phrase><annotation type="concept">Every Page is Page One</annotation></phrase> approach to information design and use structured writing and single-sourcing techniques as a best-effort method to create linear media for those of your readers who still need paper or paper-like formats – or for those documents where linear organization still makes sense.</p>
</section>
</chapter>
